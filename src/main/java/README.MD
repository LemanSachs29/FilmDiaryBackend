# FilmDiary - AplicaciÃ³n de Diario de PelÃ­culas

## ğŸ“‹ DescripciÃ³n del Proyecto

FilmDiary es una aplicaciÃ³n web completa para llevar un registro personal de pelÃ­culas vistas y por ver. Integra con la API de TMDB para bÃºsqueda de pelÃ­culas y permite a los usuarios crear su diario personal y watchlist.

## ğŸ—ï¸ Arquitectura

- **Backend**: Spring Boot + MariaDB + JWT + IntegraciÃ³n TMDB
- **Frontend**: HTML + Bootstrap 5 + JavaScript vanilla
- **Servidor Web**: Apache (para el frontend)

## ğŸ“ Estructura del Proyecto

```
film-diary-backend/
â”œâ”€â”€ src/                          # CÃ³digo Java Spring Boot
â”œâ”€â”€ frontend/                     # AplicaciÃ³n web frontend
â”‚   â”œâ”€â”€ index.html               # Login/Registro
â”‚   â”œâ”€â”€ dashboard.html           # Dashboard principal
â”‚   â”œâ”€â”€ search.html              # BÃºsqueda de pelÃ­culas
â”‚   â”œâ”€â”€ movie-detail.html        # Detalles de pelÃ­cula
â”‚   â”œâ”€â”€ diary.html               # Diario personal
â”‚   â”œâ”€â”€ watchlist.html           # Lista de pelÃ­culas por ver
â”‚   â”œâ”€â”€ css/styles.css           # Estilos personalizados
â”‚   â””â”€â”€ js/                      # LÃ³gica JavaScript
â”‚       â”œâ”€â”€ api.js               # ComunicaciÃ³n con backend
â”‚       â”œâ”€â”€ auth.js              # AutenticaciÃ³n
â”‚       â”œâ”€â”€ dashboard.js         # Dashboard
â”‚       â”œâ”€â”€ search.js            # BÃºsqueda
â”‚       â”œâ”€â”€ movie-detail.js      # Detalles pelÃ­cula
â”‚       â”œâ”€â”€ diary.js             # Diario
â”‚       â””â”€â”€ watchlist.js         # Watchlist
```

## ğŸš€ Estado Actual - FUNCIONALIDADES VERIFICADAS

### âœ… **COMPLETAMENTE FUNCIONAL**
- **Registro de usuarios** - Validaciones completas, almacenamiento seguro
- **Inicio de sesiÃ³n** - AutenticaciÃ³n JWT, sesiÃ³n persistente
- **Cierre de sesiÃ³n** - Limpieza completa de datos
- **BÃºsqueda de pelÃ­culas** - IntegraciÃ³n TMDB con paginaciÃ³n

### ğŸ”§ **DESARROLLADO (Pendiente de verificaciÃ³n)**
- **Dashboard principal** - Vista general personalizada
- **Detalles de pelÃ­cula** - InformaciÃ³n completa + aÃ±adir al diario/watchlist  
- **Diario personal** - GestiÃ³n de pelÃ­culas vistas
- **Watchlist** - Lista de pelÃ­culas por ver

## ğŸ”§ ConfiguraciÃ³n y Setup

### **Requisitos**
- Java 17+
- MariaDB
- Apache HTTP Server
- API Key de TMDB

### **Variables de Entorno**
```bash
export TMDB_API_KEY="tu_api_key_de_tmdb"
```

### **Base de Datos**
MariaDB con esquemas: `usuario`, `pelicula`, `usuario_diario`, `usuario_watchlist`

### **Ejecutar Backend**
```bash
cd film-diary-backend
./mvnw spring-boot:run
```
El backend estarÃ¡ disponible en: `http://localhost:8080`

### **Configurar Frontend con Apache**

#### **1. Copiar archivos frontend**
```bash
# Copiar la carpeta frontend al directorio de Apache
sudo cp -r frontend/ /var/www/html/
```

#### **2. Configurar permisos**
```bash
sudo chown -R www-data:www-data /var/www/html/frontend/
sudo chmod -R 755 /var/www/html/frontend/
```

#### **3. Verificar Apache**
```bash
# Verificar que Apache estÃ© ejecutÃ¡ndose
sudo systemctl status apache2

# Si no estÃ¡ activo, iniciarlo
sudo systemctl start apache2
```

#### **4. Acceder a la aplicaciÃ³n**
- **URL de acceso**: `http://localhost/frontend/index.html`
- **Login/Registro**: `http://localhost/frontend/index.html`
- **BÃºsqueda**: `http://localhost/frontend/search.html`

## ğŸ”Œ API Endpoints (Backend)

### **AutenticaciÃ³n**
- `POST /api/auth/login` - Iniciar sesiÃ³n
- `POST /api/auth/register` - Registrar usuario

### **BÃºsqueda de PelÃ­culas**  
- `GET /api/movies/search?query={query}&page={page}` - Buscar pelÃ­culas en TMDB
- `GET /api/movies/{movieId}` - Detalles de pelÃ­cula especÃ­fica

### **Diario Personal**
- `GET /api/diario?usuarioId={id}&page={page}&size={size}` - Obtener diario paginado
- `POST /api/diario/tmdb/{tmdbId}?usuarioId={id}` - AÃ±adir pelÃ­cula al diario
- `PUT /api/diario/{entryId}` - Actualizar entrada
- `DELETE /api/diario/{entryId}` - Eliminar entrada

### **Watchlist**
- `GET /api/watchlist?usuarioId={id}&page={page}&size={size}` - Obtener watchlist paginada
- `POST /api/watchlist/tmdb/{tmdbId}?usuarioId={id}` - AÃ±adir pelÃ­cula a watchlist
- `DELETE /api/watchlist/{peliculaId}?usuarioId={id}` - Eliminar de watchlist
- `GET /api/watchlist/count?usuarioId={id}` - Contar pelÃ­culas en watchlist

## ğŸš€ Flujo de Usuario

1. **Registro/Login** â†’ AutenticaciÃ³n JWT + datos almacenados
2. **Dashboard** â†’ Vista general personalizada
3. **BÃºsqueda** â†’ Encontrar pelÃ­culas en TMDB
4. **Detalles** â†’ Ver informaciÃ³n completa + aÃ±adir a diario/watchlist
5. **Diario** â†’ Gestionar pelÃ­culas vistas (editar, eliminar)
6. **Watchlist** â†’ Gestionar pelÃ­culas por ver

## ğŸ’¡ CaracterÃ­sticas TÃ©cnicas

### **Frontend**
- **AutenticaciÃ³n automÃ¡tica** con localStorage
- **API centralizada** (api.js) que maneja automÃ¡ticamente el usuario logueado
- **Sistema de notificaciones** con Bootstrap toasts
- **Estados de carga** y manejo de errores
- **Rating con estrellas** interactivo (1-5 estrellas)
- **Responsive design** con Bootstrap 5

### **Backend**
- **Seguridad JWT** con tokens persistentes
- **IntegraciÃ³n TMDB** completa
- **Base de datos relacional** optimizada
- **Validaciones** exhaustivas
- **CORS** configurado para desarrollo local

## ğŸ”§ ResoluciÃ³n de Problemas

### **Problemas Comunes**

#### **1. Error de CORS**
- Verificar que backend estÃ© en `localhost:8080`
- Verificar que frontend acceda via `http://localhost/frontend/`

#### **2. Error "api is not defined"**
- Verificar que `js/api.js` se carga antes que otros scripts JS
- Forzar recarga: `Ctrl+F5`

#### **3. Error de localStorage**
- Verificar acceso via HTTP (no file://)
- Verificar que Apache estÃ© sirviendo correctamente

#### **4. Problemas de autenticaciÃ³n**
- Verificar variable `TMDB_API_KEY` en backend
- Verificar conexiÃ³n a MariaDB

### **Debugging**
```bash
# Backend - Ver logs
tail -f logs/spring.log

# Frontend - Console del navegador
F12 â†’ Console â†’ Ver errores JavaScript
```

### **Reset completo**
```javascript
// En consola del navegador si es necesario
localStorage.clear();
window.location.reload();
```

## ğŸ” URLs de Acceso

### **AplicaciÃ³n**
- **Inicio**: `http://localhost/frontend/index.html`
- **Dashboard**: `http://localhost/frontend/dashboard.html`
- **BÃºsqueda**: `http://localhost/frontend/search.html`

### **Backend**
- **API**: `http://localhost:8080/api`
- **Swagger**: `http://localhost:8080/swagger-ui.html`

---

**Desarrollado con Spring Boot + Bootstrap 5 + JavaScript Vanilla**  
**IntegraciÃ³n TMDB para catÃ¡logo de pelÃ­culas**